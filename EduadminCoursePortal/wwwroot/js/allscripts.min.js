function FormSubmit(){return $(this).valid()?(BookingParticipants.FixIndicies(),$("#btnBook").hide(),$("#loading").show(),!0):!1}function IndexBookingOnReady(){var n=$(".ParticipantPriceNameTemplate");n.length>0&&(BookingParticipants.ParticipantTemplate.PriceNameTemplate=$(n[0]).html(),BookingParticipants.ParticipantTemplate.ReplaceParticipantTemplate(),n.remove(),BookingParticipants.ParticipantTemplate.RemoveDOMTemplates());BookingParticipants.FixIndicies();BookingParticipants.HideDeleteButtonIfOnlySinglePart();FormPrice.InitFormPrice()}function centerWindow(n){n.sender.center()}function ShowAllPanels(n){for(var t=0;t<allElements.length;t++)$(allElements[t]).closest("[id^='"+n+"']").show}function HideAllPanels(n){for(var t=0;t<allElements.length;t++)$(allElements[t]).closest("[id^='"+n+"']").hide()}function ShowPages(n){var i,t;for(HideAllPanels(n),i=allElements.slice(currPage*20,20+currPage*20),t=0;t<i.length;t++)$(i[t]).closest("[id^='"+n+"]").show();$(".pageOf").html("Sida "+(currPage+1)+"/"+numberOfPages)}function NextPage(n){currPage!==numberOfPages-1&&(currPage++,ShowPages(n))}function PreviousPage(n){currPage!==0&&(currPage--,ShowPages(n))}function saveQuestionCallback(n){n.Error===undefined?toastr.success("Tillägg har sparats"):toastr.warning("Tillägg kunde inte sparas")}function clearToastr(){toastr.remove()}function getValue(n,t){var i=$(n),r,u;switch(i.data().type){case"text":case"date":return i.val().length>0||t?i.data().value:0;case"checkbox":case"radio":return i.is(":checked")?i.data().value:0;case"numerical":return n.value==""?0:parseSweFloat(i.data().value)*parseInt(n.value);case"select":return r=n.options,u=r[r.selectedIndex],parseSweFloat($(u).data().value);case"hidden":return parseSweFloat(i.data().value);default:return 0}}function getQuantity(n){var t=$("#"+n);return t.val()==""?0:parseSweFloat(t.val())}function parseSweFloat(n){return typeof n=="string"?parseFloat(n.replace(",",".")):n}function getOldParticipantCount(){var n=$("#partqtyholder").val();return n===undefined?-1:parseInt(n)}function CreateInterestReg(){var r=$("#CompanyName").val(),u=$("#Name").val(),t=$("#Email").val(),f=$("#Mobile").val(),i=$("#PartNr").val(),e=$("#Notes").val(),n=!0;if(r.length<1&&($("#CompanyName").parent().addClass("has-error"),n=!1),u.length<1&&($("#Name").parent().addClass("has-error"),n=!1),t.length<1&&($("#Email").parent().addClass("has-error"),n=!1),f.length<1&&($("#Mobile").parent().addClass("has-error"),n=!1),i.length<1&&($("#PartNr").parent().addClass("has-error"),n=!1),parseInt(i,10)>100&&($("#PartNr").parent().addClass("has-error"),n=!1),Validation.ValidEmail(t)||($("#Email").parent().addClass("has-error"),n=!1),n===!1){$("#errorMessage").css("display","block");return}}function openPopup(n,t){$("#schedule_"+n).dialog({title:t,height:"auto",modal:!0})}function InterestRegSuccess(n){n.success===!0?($("#interestRegistration").dialog("close"),toastr.success(n.message)):EducationError.InterestRegFailed()}function ShowInterestRegPopUp(n,t){$("#interestRegistration").dialog({title:t,height:"auto",modal:!0})}function showOrHideTable(n,t,i,r){var u=document.getElementsByClassName(n),e,s,f,o;if(CheckForHiddenTables(u)===!0){for(e=0;e<u.length;e++)u[e].style.display="inline";s=document.getElementById("link"+n);s.textContent=t}else{for(f=0;f<u.length;f++)f>0&&(u[f].style.display="none");o=document.getElementById("link"+n);u.length-1>1&&(o.textContent=u.length-1+" "+i);u.length-1==1&&(o.textContent=u.length-1+" "+r)}}function CheckForHiddenTables(n){for(var i=!1,t=0;t<n.length;t++)if(n[t].style.display==="none"){i=!0;break}return i}var BookingValidationHelper={GetInputIdSuffix:function(n){var r=$(n),t=r.attr("id"),i;return t===undefined||t===null?t:(i=t.lastIndexOf("_"),i<0)?t:t.substring(i+1)}},BookingBook={UnexpectedBookingError:"",UnexpectedBookingErrorReloadPage:"",BookingFailedReloadPage:"",Init:function(n,t,i){this.UnexpectedBookingError=n;this.BookingFailedReloadPage=t;this.UnexpectedBookingErrorReloadPage=i},ClearCustomErrors:function(){$("#ulCustomErrors").empty();$("#spnCustomErrors").text("")},Success:function(n){if(n)if(n.success===!0)window.location.href=n.successRedirectUrl;else{try{console.log(n);BookingBook._ShowServerErrors(n.errors)}catch(t){$("#spnCustomErrors").text(BookingBook.BookingFailedReloadPage)}$("#btnBook").show();$("#loading").hide()}else $("#spnCustomErrors").text(BookingBook.UnexpectedBookingError)},Failure:function(){$("#spnCustomErrors").text(BookingBook.UnexpectedBookingErrorReloadPage);$("#btnBook").show();$("#loading").hide()},_ShowServerErrors:function(n){var u=$("#bookform"),f=u.find("[data-valmsg-summary=true]").addClass("validation-summary-errors").removeClass("validation-summary-valid"),i=f.find("ul").empty(),r,t;i.length===0&&(i=$("#ulCustomErrors").empty());r={};for(t in n)t!==""?r[t]=n[t].join("<br />"):$.each(n[t],function(){$("<li />").html(this).appendTo(i)});u.validate().showErrors(r)}},BookingParticipants={AdditionalParticipantTarget:"#additionalParticipantsTarget",ParticipantsUrl:"",init:function(n){this.ParticipantsUrl=n},LoadContactDataIntoParticipant:function(n){var t=$(".single-participant-wrapper")[n];$(t).attr("customerContact",!0);$("#customerContactWrapper input").each(function(){var i=BookingValidationHelper.GetInputIdSuffix(this),t;i&&(t=$("#Participants_"+n+"__"+i),t.val($(this).val()),t.attr("readonly","readonly"))});$(t).find("input").valid()},AddParticipant:function(n,t){var r=!1,u,i;if(n){if($('*[customerContact="true"]').val()!==undefined){u=$('*[customerContact="true"]').find("*[id]").first().attr("id").match(/\d+/);BookingParticipants.LoadContactDataIntoParticipant(u);return}$(".single-participant-wrapper").each(function(n,t){var u=$(t).find("input[type=text]"),i=!0;return u.each(function(n,t){if($(t).val()!=="")return i=!1,!1}),i?(r=!0,BookingParticipants.LoadContactDataIntoParticipant(n),!1):void 0})}r||($(".single-participant-wrapper").find("#Participants_0__btnRemove").show(),i=$(this.AdditionalParticipantTarget),i.length>0&&$.ajax({url:BookingParticipants.ParticipantsUrl,success:function(r){if(i.append(r),BookingParticipants.ParticipantTemplate.ReplaceParticipantTemplate(),BookingParticipants.FixIndicies(),$.validator.unobtrusive.parseDynamicContent("#participantsWrapper"),FormPrice.InitFormPrice(),n){addCustomerContact=!1;var u=$(".single-participant-wrapper").last().find("*[id]").first().attr("id").match(/\d+/);BookingParticipants.LoadContactDataIntoParticipant(u)}t&&t()}}))},FixIndicies:function(){for(var t=$(".single-participant-wrapper"),i=t.length,n=0;n<i;n++)$(t[n]).find("input").each(function(t,i){$(i).attr("name").search(/\d+/,n)>-1?$(i).attr("name",$(i).attr("name").replace(/\d+/,n)):$(i).attr("name","Participants["+n+"]."+$(i).attr("name"))}),$(t[n]).find("*[id]").each(function(t,i){$(i).attr("id").indexOf("Participants")===0?$(i).attr("id",$(i).attr("id").replace(/\d+/,n)):$(i).attr("id","Participants_"+n+"__"+$(i).attr("id"))}),$(t[n]).find("*[for]").each(function(t,i){$(i).attr("for").indexOf("Participants")===0?$(i).attr("for",$(i).attr("for").replace(/\d+/,n)):$(i).attr("for","Participants_"+n+"__"+$(i).attr("for"))}),$(t[n]).find("*[data-valmsg-for]").each(function(t,i){var r="";r=$(i).data().valmsgFor.indexOf("Participants")===0?$(i).data().valmsgFor.replace(/\d+/,n):"Participants["+n+"]."+$(i).data().valmsgFor;$(i).data("valmsgFor",r);$(i).attr("data-valmsg-for",r)})},AddPrefix:function(n,t,i,r,u){var f=$(n).attr("name"),e;f!==undefined&&f!==null&&(e=f.split("."),f=e[e.length-1],$(n).attr("name",r+t+u+f))},ParticipantTemplate:{PriceNameTemplate:"",SubEventTemplate:"",_regExpIndexReplace:new RegExp("ParticipantIndexPlaceholder","g"),ReplaceParticipantTemplate:function(){$(".participantPriceNamePlaceholder").replaceWith(BookingParticipants.ParticipantTemplate.PriceNameTemplate);$(".participantSubEventPlaceholder").replaceWith(BookingParticipants.ParticipantTemplate.SubEventTemplate)},RemoveDOMTemplates:function(){$(".participantSubEventPlaceholder").remove();$(".participantPriceNamePlaceholder").remove()}},DeleteParticipant:function(n){$(n).closest(".single-participant-wrapper").remove();BookingParticipants.FixIndicies();$.validator.unobtrusive.parseDynamicContent("#participantsWrapper");FormPrice.InitFormPrice();this.HideDeleteButtonIfOnlySinglePart()},HideDeleteButtonIfOnlySinglePart:function(){$(".single-participant-wrapper").length<=1&&$(".single-participant-wrapper").find("#Participants_0__btnRemove").hide()},AddAsParticipant:function(){var n=!0;$("#customerContactWrapper input").each(function(){n=$(this).valid()&&n});n&&(addCustomerContact=!0,BookingParticipants.AddParticipant(addCustomerContact,null))}},resizeParentFrame=function(){var n=jQuery("body").height();n!==parentDocHeight&&(parentDocHeight=n,window.parent.postMessage(parentDocHeight,"*"))},parentDocHeight=0,Pager,EducationFilterObjects,EducationError;$(document).ready(function(){setInterval(resizeParentFrame,250)});Pager=function(n,t){this.selector=n;this.allElements=$(n);this.pageSize=t;this.currPage=0;this.numberOfPages=Math.ceil(this.allElements.length/t);var i=this,r=function(){$(i.selector).hide()};this.ShowPage=function(){r();var n=i.currPage*i.pageSize,t=n+i.pageSize,u=i.allElements.slice(n,t);$(u).show()};this.PreviousPage=function(){i.currPage!==0&&(i.currPage--,i.ShowPage())};this.NextPage=function(){i.currPage!==i.numberOfPages-1&&(i.currPage++,i.ShowPage())}};Number.prototype.round=function(n){return n=n||10,parseSweFloat(this.toFixed(n))};FormPrice={NatCurrShort:"",NoVat:"",Init:function(n,t){this.NatCurrShort=n;this.NoVat=t;FormPrice.InitFormPrice()},InitFormPrice:function(){var n=$(".formValue"),t=$(".quantityHolder"),i=$(".formValueWithQuantity");n.change(FormPrice.RecalculatePrice);t.change(FormPrice.RecalculatePrice);i.change(FormPrice.RecalculatePrice);FormPrice.RecalculatePrice()},RecalculatePrice:function(){for(var f,t,e,o,r,s,i=0,u=$(".formValue"),n=0;n<u.length;n++)f=getValue(u[n],!1),i+=parseSweFloat(f);for(t=$(".formValueWithQuantity"),n=0;n<t.length;n++)e=parseInt(getQuantity($(t[n]).data().quantityid)),o=parseSweFloat(getValue(t[n],!0)),i+=e*o;if(r=i.round(2),s=FormPrice.NatCurrShort,r==0){$("#rowTotalPrice").hide();return}$("#rowTotalPrice").show();$("#spnTotalPrice").text(r+" "+s+" "+FormPrice.NoVat)}};EducationFilterObjects={FilterObjectsUrl:"",Init:function(n){this.FilterObjectsUrl=n},FilterObjects:function(n,t){$(".loading").show();(n===""||n===undefined)&&(n=null);(t===""||t===undefined)&&(t=null);$("#courseWrapper").load(this.FilterObjectsUrl+"?SubjectID="+n+"&CategoryID="+t,function(){$(".loading").hide()})}};EducationError={InterestRegistrationError:"",Init:function(n){this.InterestRegistrationError=n},InterestRegFailed:function(){toastr.error(EducationError.InterestRegistrationError)}};