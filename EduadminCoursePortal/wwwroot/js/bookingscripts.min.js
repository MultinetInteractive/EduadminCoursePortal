function FormSubmit(){return $(this).valid()?(BookingParticipants.FixIndicies(),$("#btnBook").hide(),$("#loading").show(),!0):!1}function IndexBookingOnReady(){var n=$(".ParticipantPriceNameTemplate");n.length>0&&(BookingParticipants.ParticipantTemplate.PriceNameTemplate=$(n[0]).html(),BookingParticipants.ParticipantTemplate.ReplaceParticipantTemplate(),n.remove(),BookingParticipants.ParticipantTemplate.RemoveDOMTemplates());BookingParticipants.FixIndicies();BookingParticipants.HideDeleteButtonIfOnlySinglePart();FormPrice.InitFormPrice()}var BookingValidationHelper={GetInputIdSuffix:function(n){var r=$(n),t=r.attr("id"),i;return t===undefined||t===null?t:(i=t.lastIndexOf("_"),i<0)?t:t.substring(i+1)}},BookingBook={UnexpectedBookingError:"",UnexpectedBookingErrorReloadPage:"",BookingFailedReloadPage:"",Init:function(n,t,i){this.UnexpectedBookingError=n;this.BookingFailedReloadPage=t;this.UnexpectedBookingErrorReloadPage=i},ClearCustomErrors:function(){$("#ulCustomErrors").empty();$("#spnCustomErrors").text("")},Success:function(n){if(n)if(n.Success===!0)window.location.href=n.SuccessRedirectUrl;else{try{BookingBook._ShowServerErrors(n.Errors)}catch(t){$("#spnCustomErrors").text(BookingBook.BookingFailedReloadPage)}$("#btnBook").show();$("#loading").hide()}else $("#spnCustomErrors").text(BookingBook.UnexpectedBookingError)},Failure:function(){$("#spnCustomErrors").text(BookingBook.UnexpectedBookingErrorReloadPage);$("#btnBook").show();$("#loading").hide()},_ShowServerErrors:function(n){var u=$("#bookform"),f=u.find("[data-valmsg-summary=true]").addClass("validation-summary-errors").removeClass("validation-summary-valid"),i=f.find("ul").empty(),r,t;i.length===0&&(i=$("#ulCustomErrors").empty());r={};for(t in n)t!==""?r[t]=n[t].join("<br />"):$.each(n[t],function(){$("<li />").html(this).appendTo(i)});u.validate().showErrors(r)}},BookingParticipants={AdditionalParticipantTarget:"#additionalParticipantsTarget",ParticipantsUrl:"",init:function(n){this.ParticipantsUrl=n},LoadContactDataIntoParticipant:function(n){var t=$(".single-participant-wrapper")[n];$(t).attr("customerContact",!0);$("#customerContactWrapper input").each(function(){var i=BookingValidationHelper.GetInputIdSuffix(this),t;i&&(t=$("#Participants_"+n+"__"+i),t.val($(this).val()),t.attr("readonly","readonly"))});$(t).find("input").valid()},AddParticipant:function(n,t){var r=!1,u,i;if(n){if($('*[customerContact="true"]').val()!==undefined){u=$('*[customerContact="true"]').find("*[id]").first().attr("id").match(/\d+/);BookingParticipants.LoadContactDataIntoParticipant(u);return}$(".single-participant-wrapper").each(function(n,t){var u=$(t).find("input[type=text]"),i=!0;return u.each(function(n,t){if($(t).val()!=="")return i=!1,!1}),i?(r=!0,BookingParticipants.LoadContactDataIntoParticipant(n),!1):void 0})}r||($(".single-participant-wrapper").find("#Participants_0__btnRemove").show(),i=$(this.AdditionalParticipantTarget),i.length>0&&$.ajax({url:BookingParticipants.ParticipantsUrl,success:function(r){if(i.append(r),BookingParticipants.ParticipantTemplate.ReplaceParticipantTemplate(),BookingParticipants.FixIndicies(),$.validator.unobtrusive.parseDynamicContent("#participantsWrapper"),FormPrice.InitFormPrice(),n){addCustomerContact=!1;var u=$(".single-participant-wrapper").last().find("*[id]").first().attr("id").match(/\d+/);BookingParticipants.LoadContactDataIntoParticipant(u)}t&&t()}}))},FixIndicies:function(){for(var t=$(".single-participant-wrapper"),i=t.length,n=0;n<i;n++)$(t[n]).find("input").each(function(t,i){$(i).attr("name").search(/\d+/,n)>-1?$(i).attr("name",$(i).attr("name").replace(/\d+/,n)):$(i).attr("name","Participants["+n+"]."+$(i).attr("name"))}),$(t[n]).find("*[id]").each(function(t,i){$(i).attr("id").indexOf("Participants")===0?$(i).attr("id",$(i).attr("id").replace(/\d+/,n)):$(i).attr("id","Participants_"+n+"__"+$(i).attr("id"))}),$(t[n]).find("*[for]").each(function(t,i){$(i).attr("for").indexOf("Participants")===0?$(i).attr("for",$(i).attr("for").replace(/\d+/,n)):$(i).attr("for","Participants_"+n+"__"+$(i).attr("for"))}),$(t[n]).find("*[data-valmsg-for]").each(function(t,i){var r="";r=$(i).data().valmsgFor.indexOf("Participants")===0?$(i).data().valmsgFor.replace(/\d+/,n):"Participants["+n+"]."+$(i).data().valmsgFor;$(i).data("valmsgFor",r);$(i).attr("data-valmsg-for",r)})},AddPrefix:function(n,t,i,r,u){var f=$(n).attr("name"),e;f!==undefined&&f!==null&&(e=f.split("."),f=e[e.length-1],$(n).attr("name",r+t+u+f))},ParticipantTemplate:{PriceNameTemplate:"",SubEventTemplate:"",_regExpIndexReplace:new RegExp("ParticipantIndexPlaceholder","g"),ReplaceParticipantTemplate:function(){$(".participantPriceNamePlaceholder").replaceWith(BookingParticipants.ParticipantTemplate.PriceNameTemplate);$(".participantSubEventPlaceholder").replaceWith(BookingParticipants.ParticipantTemplate.SubEventTemplate)},RemoveDOMTemplates:function(){$(".participantSubEventPlaceholder").remove();$(".participantPriceNamePlaceholder").remove()}},DeleteParticipant:function(n){$(n).closest(".single-participant-wrapper").remove();BookingParticipants.FixIndicies();$.validator.unobtrusive.parseDynamicContent("#participantsWrapper");FormPrice.InitFormPrice();this.HideDeleteButtonIfOnlySinglePart()},HideDeleteButtonIfOnlySinglePart:function(){$(".single-participant-wrapper").length<=1&&$(".single-participant-wrapper").find("#Participants_0__btnRemove").hide()},AddAsParticipant:function(){var n=!0;$("#customerContactWrapper input").each(function(){n=$(this).valid()&&n});n&&(addCustomerContact=!0,BookingParticipants.AddParticipant(addCustomerContact,null))}};